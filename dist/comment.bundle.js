(()=>{chrome.alarms.onAlarm.addListener((function(e){switch(e.name){case"sync":syncHandler()}})),chrome.tabs.onUpdated.addListener(((e,o,n)=>{const t=o.url;t&&chrome.storage.local.get("mode",(o=>{tabHandler(e,t,o.mode)}))})),chrome.tabs.onCreated.addListener((e=>{chrome.storage.local.get("zen",(o=>{o.zen&&(console.log(e),block(e.id))}))}));try{importScripts("./js/rules.js","./js/tabHandler.js","./js/sync.js","./js/actions.js")}catch(e){console.error(e)}chrome.contextMenus.onClicked.addListener((function(o,n){o.menuItemId===e&&(console.log(o,n),popout(n))}));const e="POPOUT";chrome.runtime.onInstalled.addListener((()=>{chrome.contextMenus.create({title:"Pop-out window",contexts:["all"],id:e})})),chrome.alarms.create("sync",{periodInMinutes:5,when:Date.now()})})();